<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Métodos de Pagamento — Orquestraio Docs</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<nav class="topnav" id="topnav">
  <div class="topnav-inner">
    <a href="index.html" class="topnav-logo">
      <div class="topnav-logo-mark">
        <svg viewBox="0 0 24 24" fill="none" stroke="#a78bfa" stroke-width="2"><path d="M9 3v14M9 3H5M9 3h4M15 3v14M15 3h4"/></svg>
      </div>
      <span class="topnav-logo-text">Orquestraio</span>
      <span class="topnav-version">v0.4</span>
    </a>
    <div class="topnav-right">
      <a href="https://github.com/vitinh0z/orquestraio" class="topnav-icon-btn" target="_blank" rel="noopener" title="GitHub">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
      </a>
      <button class="topnav-icon-btn" onclick="toggleTheme()" title="Alternar tema">
        <svg id="themeIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
      </button>
    </div>
  </div>
</nav>

<aside class="sidebar">
  <div class="sidebar-section">
    <div class="sidebar-section-label">Inicio</div>
    <a href="index.html" class="sidebar-item">Introducao</a>
    <a href="quickstart.html" class="sidebar-item">Primeiros Passos</a>
    <a href="autenticacao.html" class="sidebar-item">Autenticacao</a>
    <a href="glossario.html" class="sidebar-item">Glossario</a>
    <a href="changelog.html" class="sidebar-item">Changelog</a>
  </div>
  <div class="sidebar-section">
    <div class="sidebar-section-label">API</div>
    <a href="processar-pagamento.html" class="sidebar-item">Processar Pagamento</a>
    <a href="metodos-pagamento.html" class="sidebar-item active">Metodos de Pagamento</a>
    <a href="smartrouter.html" class="sidebar-item">SmartRouter</a>
    <a href="webhooks.html" class="sidebar-item">Webhooks</a>
    <a href="erros-status.html" class="sidebar-item">Erros &amp; Status</a>
    <a href="rate-limiting.html" class="sidebar-item">Rate Limiting</a>
  </div>
  <div class="sidebar-section">
    <div class="sidebar-section-label">Funcionalidades</div>
    <a href="resiliencia.html" class="sidebar-item">Resiliencia</a>
    <a href="seguranca.html" class="sidebar-item">Seguranca</a>
  </div>
  <div class="sidebar-section">
    <div class="sidebar-section-label">Guias</div>
    <a href="sandbox.html" class="sidebar-item">Sandbox &amp; MOCK</a>
  </div>
</aside>

<div class="shell">
  <main class="main">

    <div class="section-label">API</div>
    <h1 class="section-title">Métodos de Pagamento</h1>
    <div class="reading-time-badge">
      <svg viewBox="0 0 24 24" width="11" height="11" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
      3 min de leitura
    </div>
    <p class="section-desc">O Orquestraio suporta três tipos de pagamento: <code>pix</code>, <code>boleto</code> e <code>card_token</code>. O tipo é informado no objeto <code>paymentMethodRequest</code> de cada requisição.</p>

    <!-- PIX -->
    <h2 id="pix">PIX</h2>
    <p>Transferência instantânea 24/7, liquidação em segundos. Disponível exclusivamente em <code>BRL</code> via <strong>MercadoPago</strong>.</p>

    <table class="doc-table">
      <thead><tr><th>Campo</th><th>Valor</th><th>Obrigatório</th></tr></thead>
      <tbody>
        <tr><td><code>type</code></td><td><code>"pix"</code></td><td>Sim</td></tr>
        <tr><td><code>token</code></td><td><code>null</code></td><td>Não — sempre nulo para PIX</td></tr>
      </tbody>
    </table>

    <div class="codeblock">
      <div class="codeblock-header">
        <div class="lang-tabs"><button class="lang-tab active">Exemplo PIX</button></div>
        <button class="copy-btn" onclick="copyBlock(this)">Copiar</button>
      </div>
      <div class="codeblock-body">
<div class="tab-pane active"><span class="t-punct">{</span>
  <span class="t-key">"idempotencyKey"</span><span class="t-punct">:</span> <span class="t-str">"pix-order-991"</span><span class="t-punct">,</span>
  <span class="t-key">"amount"</span><span class="t-punct">:</span> <span class="t-num">150.00</span><span class="t-punct">,</span>
  <span class="t-key">"currency"</span><span class="t-punct">:</span> <span class="t-str">"BRL"</span><span class="t-punct">,</span>
  <span class="t-key">"paymentMethodRequest"</span><span class="t-punct">:</span> <span class="t-punct">{</span>
    <span class="t-key">"type"</span><span class="t-punct">:</span> <span class="t-str">"pix"</span><span class="t-punct">,</span>
    <span class="t-key">"token"</span><span class="t-punct">:</span> <span class="t-nil">null</span>
  <span class="t-punct">},</span>
  <span class="t-key">"customer"</span><span class="t-punct">:</span> <span class="t-punct">{</span> <span class="t-key">"id"</span><span class="t-punct">:</span> <span class="t-str">"usr_1"</span><span class="t-punct">,</span> <span class="t-key">"email"</span><span class="t-punct">:</span> <span class="t-str">"joao@mail.com"</span><span class="t-punct">,</span> <span class="t-key">"document"</span><span class="t-punct">:</span> <span class="t-str">"123.456.789-09"</span> <span class="t-punct">}</span>
<span class="t-punct">}</span></div>
      </div>
    </div>

    <div class="callout callout-tip">
      <div class="callout-body"><strong>Confirmação assíncrona:</strong> PIX tem confirmação em milissegundos, mas o status final (<code>APPROVED</code>) chega via webhook <code>payment.approved</code>. Configure seu endpoint de webhook antes de ir para produção com PIX.</div>
    </div>

    <!-- BOLETO -->
    <h2 id="boleto">Boleto Bancário</h2>
    <p>Boleto gerado com vencimento padrão de 3 dias úteis. Disponível em <code>BRL</code> via <strong>MercadoPago</strong>. O pagamento é confirmado pelo banco emissor — status atualizado via webhook em até 1–3 dias úteis.</p>

    <table class="doc-table">
      <thead><tr><th>Campo</th><th>Valor</th><th>Obrigatório</th></tr></thead>
      <tbody>
        <tr><td><code>type</code></td><td><code>"boleto"</code></td><td>Sim</td></tr>
        <tr><td><code>token</code></td><td><code>null</code></td><td>Não — sempre nulo para boleto</td></tr>
      </tbody>
    </table>

    <div class="callout callout-warning">
      <span class="callout-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="var(--amber)" stroke-width="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
      </span>
      <div class="callout-body"><strong>Atenção:</strong> Boleto tem alta taxa de abandono e não tem cancelamento automático — o boleto vencido fica em <code>PENDING</code> até que o gateway confirme o não-pagamento. Implemente lógica de expiração no seu sistema.</div>
    </div>

    <!-- CARD TOKEN -->
    <h2 id="card-token">Cartão via Token</h2>
    <p>Pagamento por cartão de crédito ou débito usando um token pré-gerado pelo SDK do gateway. O Orquestraio <strong>nunca recebe dados brutos de cartão</strong> — somente o token opaco retornado pelo frontend do gateway.</p>

    <table class="doc-table">
      <thead><tr><th>Campo</th><th>Valor</th><th>Obrigatório</th></tr></thead>
      <tbody>
        <tr><td><code>type</code></td><td><code>"card_token"</code></td><td>Sim</td></tr>
        <tr><td><code>token</code></td><td>Token opaco do gateway (ex: <code>"tok_4f8a2b1c9d"</code>)</td><td><strong>Sim</strong></td></tr>
      </tbody>
    </table>

    <div class="callout callout-info">
      <span class="callout-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="var(--purple-light)" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
      </span>
      <div class="callout-body"><strong>Como gerar o token:</strong> Use o SDK JavaScript do gateway no frontend (Stripe.js, MercadoPago SDK) para tokenizar os dados do cartão. O token gerado é enviado ao seu backend, que o repassa ao Orquestraio. Dados sensíveis nunca transitam pelo seu servidor.</div>
    </div>

    <div class="codeblock">
      <div class="codeblock-header">
        <div class="lang-tabs"><button class="lang-tab active">Exemplo card_token</button></div>
        <button class="copy-btn" onclick="copyBlock(this)">Copiar</button>
      </div>
      <div class="codeblock-body">
<div class="tab-pane active"><span class="t-punct">{</span>
  <span class="t-key">"idempotencyKey"</span><span class="t-punct">:</span> <span class="t-str">"card-order-772"</span><span class="t-punct">,</span>
  <span class="t-key">"amount"</span><span class="t-punct">:</span> <span class="t-num">299.90</span><span class="t-punct">,</span>
  <span class="t-key">"currency"</span><span class="t-punct">:</span> <span class="t-str">"USD"</span><span class="t-punct">,</span>
  <span class="t-key">"paymentMethodRequest"</span><span class="t-punct">:</span> <span class="t-punct">{</span>
    <span class="t-key">"type"</span><span class="t-punct">:</span> <span class="t-str">"card_token"</span><span class="t-punct">,</span>
    <span class="t-key">"token"</span><span class="t-punct">:</span> <span class="t-str">"tok_4f8a2b1c9d"</span>  <span class="t-comment">// gerado pelo Stripe.js no frontend</span>
  <span class="t-punct">},</span>
  <span class="t-key">"customer"</span><span class="t-punct">:</span> <span class="t-punct">{</span>
    <span class="t-key">"id"</span><span class="t-punct">:</span> <span class="t-str">"usr_7f3a21b"</span><span class="t-punct">,</span>
    <span class="t-key">"email"</span><span class="t-punct">:</span> <span class="t-str">"joao@mail.com"</span><span class="t-punct">,</span>
    <span class="t-key">"document"</span><span class="t-punct">:</span> <span class="t-str">"123.456.789-09"</span>
  <span class="t-punct">}</span>
<span class="t-punct">}</span></div>
      </div>
    </div>

    <!-- Compatibility table -->
    <h2 id="compatibilidade">Compatibilidade por Gateway</h2>
    <table class="doc-table">
      <thead>
        <tr>
          <th>Método</th>
          <th>Stripe</th>
          <th>MercadoPago</th>
          <th>PayPal</th>
          <th>MOCK</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>pix</code></td>
          <td>—</td>
          <td><span class="tag tag-green">✓</span></td>
          <td>—</td>
          <td><span class="tag tag-green">✓</span></td>
        </tr>
        <tr>
          <td><code>boleto</code></td>
          <td>—</td>
          <td><span class="tag tag-green">✓</span></td>
          <td>—</td>
          <td><span class="tag tag-green">✓</span></td>
        </tr>
        <tr>
          <td><code>card_token</code></td>
          <td><span class="tag tag-green">✓</span></td>
          <td><span class="tag tag-green">✓</span></td>
          <td><span class="tag tag-amber">Beta</span></td>
          <td><span class="tag tag-green">✓</span></td>
        </tr>
      </tbody>
    </table>

    <p style="color:var(--text-3);font-size:0.82rem;margin-top:1.5rem;">O <a href="smartrouter.html">SmartRouter</a> seleciona automaticamente o gateway compatível com o método informado. Você pode sobrescrever via <code>metadata.gateway</code>. Se o gateway especificado não suportar o método, a API retorna <code>400 Bad Request</code>.</p>

  </main>
</div>

<script>
function toggleTheme(){
  const html=document.documentElement;
  const isLight=html.getAttribute('data-theme')==='light';
  const newTheme=isLight?'dark':'light';
  html.setAttribute('data-theme',newTheme);
  localStorage.setItem('theme',newTheme);
  document.getElementById('themeIcon').innerHTML=isLight
    ?'<circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>'
    :'<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>';
}
function applyTheme(){
  const saved=localStorage.getItem('theme');
  if(saved==='light'){
    document.documentElement.setAttribute('data-theme','light');
    document.getElementById('themeIcon').innerHTML='<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>';
  }
}
applyTheme();
function copyBlock(btn){
  const cb=btn.closest('.codeblock');
  const active=cb.querySelector('.tab-pane.active')||cb.querySelector('.tab-pane');
  navigator.clipboard.writeText(active?active.innerText:'').then(()=>{
    btn.textContent='Copiado';btn.classList.add('copied');
    setTimeout(()=>{btn.textContent='Copiar';btn.classList.remove('copied');},2000);
  });
}
</script>
<script src="shared.js"></script>
</body>
</html>
