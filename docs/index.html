<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Orquestraio — Documentação</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/7.0.0/fuse.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="progress"></div>

<!-- CMD PALETTE -->
<div class="cmd-overlay" id="cmdOverlay" onclick="closeCmdIfBg(event)">
  <div class="cmd-modal">
    <div class="cmd-search">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
      <input class="cmd-input" id="cmdInput" placeholder="Buscar seções, endpoints, conceitos..." oninput="filterCmd(this.value)" onkeydown="handleCmdKey(event)">
      <span class="cmd-esc" onclick="closeCmd()">ESC</span>
    </div>
    <div class="cmd-results" id="cmdResults"></div>
    <div class="cmd-footer">
      <span class="cmd-hint"><kbd>↑↓</kbd> navegar</span>
      <span class="cmd-hint"><kbd>Enter</kbd> ir</span>
      <span class="cmd-hint"><kbd>Esc</kbd> fechar</span>
    </div>
  </div>
</div>

<!-- VERSION FLOAT -->
<div class="version-float" id="versionFloat">
  <div class="version-btn" onclick="toggleVersionDropdown()">
    v0.4.0-alpha
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
  </div>
  <div class="version-dropdown">
    <div class="version-dd-item current">v0.4.0-alpha <span class="badge badge-green" style="font-size:0.56rem;">atual</span></div>
    <div class="version-dd-item" style="color:var(--text-3);">v0.6.0 <span class="badge badge-blue" style="font-size:0.56rem;">planejado</span></div>
    <div class="version-dd-item" style="color:var(--text-3);">v0.3.2</div>
  </div>
</div>

<!-- HEADER -->
<header class="header" id="topnav">
  <div class="header-inner">
    <a href="#intro" class="header-logo">
      <div class="header-logo-mark">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M9 3v14M9 3H5M9 3h4M15 3v14M15 3h4"/></svg>
      </div>
      <span class="header-logo-text">Orquestraio</span>
    </a>
    <div class="header-sep"></div>
    <div class="header-nav">
      <div class="header-group">
        <button class="header-nav-btn" id="btn-api" onclick="toggleDropdown('dd-api','btn-api')">
          API <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
        </button>
        <div class="header-dropdown" id="dd-api">
          <a href="processar-pagamento.html" class="dd-item" onclick="closeDropdowns()">Processar Pagamento</a>
          <a href="metodos-pagamento.html"   class="dd-item" onclick="closeDropdowns()">Métodos de Pagamento</a>
          <a href="smartrouter.html"          class="dd-item" onclick="closeDropdowns()">SmartRouter</a>
          <a href="webhooks.html"             class="dd-item" onclick="closeDropdowns()">Webhooks</a>
          <div class="dd-divider"></div>
          <a href="erros-status.html"         class="dd-item" onclick="closeDropdowns()">Erros &amp; Status</a>
          <a href="rate-limiting.html"        class="dd-item" onclick="closeDropdowns()">Rate Limiting</a>
        </div>
      </div>
      <div class="header-group">
        <button class="header-nav-btn" id="btn-features" onclick="toggleDropdown('dd-features','btn-features')">
          Funcionalidades <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
        </button>
        <div class="header-dropdown" id="dd-features">
          <a href="resiliencia.html" class="dd-item" onclick="closeDropdowns()">Idempotência</a>
          <a href="resiliencia.html" class="dd-item" onclick="closeDropdowns()">Circuit Breaker</a>
          <a href="seguranca.html"   class="dd-item" onclick="closeDropdowns()">Segurança</a>
        </div>
      </div>
      <div class="header-group">
        <button class="header-nav-btn" id="btn-guides" onclick="toggleDropdown('dd-guides','btn-guides')">
          Guias <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
        </button>
        <div class="header-dropdown" id="dd-guides">
          <a href="quickstart.html"   class="dd-item" onclick="closeDropdowns()">Primeiros Passos</a>
          <a href="autenticacao.html" class="dd-item" onclick="closeDropdowns()">Autenticação</a>
          <a href="sandbox.html"      class="dd-item" onclick="closeDropdowns()">Sandbox &amp; MOCK</a>
        </div>
      </div>
      <a href="changelog.html" class="header-nav-link">Changelog <span class="badge badge-green" style="font-size:0.56rem;">Novo</span></a>
    </div>
    <div class="header-right">
      <button class="header-search" onclick="openCmd()" title="Buscar (Ctrl+K)">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
        <span>Buscar docs...</span>
        <kbd>⌘K</kbd>
      </button>
      <a href="https://github.com/vitinh0z/orquestraio" class="header-icon-btn" target="_blank" rel="noopener" title="GitHub">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
      </a>
      <button class="header-icon-btn" onclick="toggleTheme()" title="Alternar tema">
        <svg id="themeIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
      </button>
      <button class="header-hamburger" onclick="toggleMobileDrawer()" aria-label="Menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12h18M3 6h18M3 18h18"/></svg>
      </button>
    </div>
  </div>
</header>

<!-- MOBILE DRAWER -->
<div class="mobile-drawer-overlay" id="mobileDrawerOverlay" onclick="toggleMobileDrawer()"></div>
<div class="mobile-drawer" id="mobileDrawer">
  <div style="margin-bottom:1rem;">
    <div style="font-family:var(--font-mono);font-size:0.6rem;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-muted);margin-bottom:0.5rem;padding:0 0.5rem;">Inicio</div>
    <a href="#intro" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Introducao</a>
    <a href="quickstart.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Primeiros Passos</a>
    <a href="autenticacao.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Autenticacao</a>
    <a href="glossario.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Glossario</a>
    <a href="changelog.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Changelog</a>
  </div>
  <div style="margin-bottom:1rem;">
    <div style="font-family:var(--font-mono);font-size:0.6rem;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-muted);margin-bottom:0.5rem;padding:0 0.5rem;">API</div>
    <a href="processar-pagamento.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Processar Pagamento</a>
    <a href="metodos-pagamento.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Metodos de Pagamento</a>
    <a href="smartrouter.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">SmartRouter</a>
    <a href="webhooks.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Webhooks</a>
    <a href="erros-status.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Erros</a>
    <a href="rate-limiting.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Rate Limiting</a>
  </div>
  <div style="margin-bottom:1rem;">
    <div style="font-family:var(--font-mono);font-size:0.6rem;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-muted);margin-bottom:0.5rem;padding:0 0.5rem;">Guias</div>
    <a href="sandbox.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Sandbox</a>
    <a href="resiliencia.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Idempotencia</a>
    <a href="resiliencia.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Circuit Breaker</a>
    <a href="seguranca.html" style="display:block;padding:0.4rem 0.5rem;color:var(--text-3);font-size:0.82rem;text-decoration:none;border-radius:var(--radius);" onclick="toggleMobileDrawer()">Seguranca</a>
  </div>
</div>

<div class="layout">
  <main class="main">

    <!-- HERO -->
    <div class="hero">
      <div class="hero-inner">
        <div class="hero-left">
          <div style="display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem;">
            <div style="width:56px;height:56px;background:var(--bg-surface);border:1px solid var(--border);border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;">
              <svg viewBox="0 0 24 24" fill="none" width="30" height="30"><path d="M13 10V3L4 14h7v7l9-11h-7z" stroke="var(--brand)" stroke-width="1.8" stroke-linejoin="round"/></svg>
            </div>
          </div>
          <h1 class="hero-title">Orquestraio<br>Documentação</h1>
          <p class="hero-lead">Aprenda a integrar e usar o Orquestraio — <span style="color:var(--brand);font-weight:500;">Múltiplos gateways.</span> Uma única API para PIX, boleto e cartão com roteamento inteligente, idempotência e resiliência embutidos.</p>
          <div class="hero-actions">
            <a href="processar-pagamento.html" class="btn btn-brand">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
              Ver endpoints
            </a>
            <a href="sandbox.html" class="btn btn-outline">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
              Testar Sandbox
            </a>
          </div>
        </div>

        <!-- Getting Started panel -->
        <div class="hero-getting-started">
          <div class="hgs-header">
            <div class="hgs-icon">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
            </div>
            <span class="hgs-title">Primeiros Passos</span>
          </div>
          <p class="hgs-desc">Configure e faça seu primeiro pagamento em minutos.</p>
          <div class="hgs-grid">
            <a href="quickstart.html" class="hgs-item" title="cURL">
              <svg viewBox="0 0 24 24" fill="none" stroke="#a0a0a0" stroke-width="1.5" width="28" height="28"><rect x="2" y="3" width="20" height="15" rx="2"/><path d="m7 13 3-3-3-3M13 13h4"/></svg>
            </a>
            <a href="quickstart.html" class="hgs-item" title="JavaScript">
              <svg viewBox="0 0 24 24" width="28" height="28"><rect width="24" height="24" rx="3" fill="#f7df1e"/><text x="4" y="18" font-family="Arial" font-weight="bold" font-size="13" fill="#000">JS</text></svg>
            </a>
            <a href="quickstart.html" class="hgs-item" title="Python">
              <svg viewBox="0 0 24 24" width="28" height="28" fill="none"><path d="M11.914 2C6.945 2 7.236 4.17 7.236 4.17l.006 2.246h4.764v.674H5.394S2 6.744 2 11.759s3.008 4.84 3.008 4.84h1.795v-2.328s-.097-3.008 2.96-3.008h5.1s2.862.046 2.862-2.768V4.936S18.19 2 11.914 2z" fill="#3776ab"/><path d="M12.086 22c4.969 0 4.678-2.17 4.678-2.17l-.006-2.246h-4.764v-.674h6.612S22 17.256 22 12.241s-3.008-4.84-3.008-4.84h-1.795v2.328s.097 3.008-2.96 3.008h-5.1S6.275 12.69 6.275 15.504v3.56S5.81 22 12.086 22z" fill="#ffd43b"/></svg>
            </a>
            <a href="quickstart.html" class="hgs-item" title="Go">
              <svg viewBox="0 0 30 18" width="32" height="20"><text x="0" y="14" font-family="Arial" font-weight="bold" font-size="16" fill="#00add8">Go</text></svg>
            </a>
            <a href="quickstart.html" class="hgs-item" title="Java">
              <svg viewBox="0 0 30 18" width="32" height="20"><text x="0" y="14" font-family="Arial" font-weight="bold" font-size="13" fill="#f89820">Java</text></svg>
            </a>
            <a href="autenticacao.html" class="hgs-item" title="Autenticação">
              <svg viewBox="0 0 24 24" fill="none" stroke="#a78bfa" stroke-width="1.5" width="26" height="26"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            </a>
            <a href="webhooks.html" class="hgs-item" title="Webhooks">
              <svg viewBox="0 0 24 24" fill="none" stroke="#60a5fa" stroke-width="1.5" width="26" height="26"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
            </a>
            <a href="smartrouter.html" class="hgs-item" title="SmartRouter">
              <svg viewBox="0 0 24 24" fill="none" stroke="#a78bfa" stroke-width="1.5" width="26" height="26"><path d="M9 18 3 12l6-6"/><path d="M21 12H3"/></svg>
            </a>
            <a href="resiliencia.html" class="hgs-item" title="Idempotência">
              <svg viewBox="0 0 24 24" fill="none" stroke="#fbbf24" stroke-width="1.5" width="26" height="26"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
            </a>
            <a href="resiliencia.html" class="hgs-item" title="Circuit Breaker">
              <svg viewBox="0 0 24 24" fill="none" stroke="#fb923c" stroke-width="1.5" width="26" height="26"><path d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
            </a>
          </div>
        </div>
      </div>

      <!-- Products section -->
      <div class="hero-products">
        <div class="hero-products-title">Recursos</div>
        <div class="products-grid">
          <a href="processar-pagamento.html" class="product-card">
            <div class="product-card-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="5" width="20" height="14" rx="2"/><path d="M2 10h20"/></svg>
              <span class="product-card-title">Pagamentos</span>
            </div>
            <p class="product-card-desc">Processe PIX, boleto e cartão em múltiplos gateways com uma única chamada de API. Roteamento automático e fallback embutido.</p>
          </a>
          <a href="smartrouter.html" class="product-card">
            <div class="product-card-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
              <span class="product-card-title">SmartRouter</span>
            </div>
            <p class="product-card-desc">Roteamento inteligente entre Stripe, MercadoPago e PayPal baseado em moeda, valor e disponibilidade do gateway.</p>
          </a>
        </div>
        <div class="products-grid-3">
          <a href="webhooks.html" class="product-card">
            <div class="product-card-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
              <span class="product-card-title">Webhooks</span>
            </div>
            <p class="product-card-desc">Eventos normalizados de todos os gateways com formato unificado para seu sistema.</p>
          </a>
          <a href="resiliencia.html" class="product-card">
            <div class="product-card-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
              <span class="product-card-title">Idempotência</span>
            </div>
            <p class="product-card-desc">Proteção contra duplicação com Redis TTL 24h e chaves UUID v4 para pagamentos seguros.</p>
          </a>
          <a href="resiliencia.html" class="product-card">
            <div class="product-card-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              <span class="product-card-title">Circuit Breaker</span>
            </div>
            <p class="product-card-desc">Resiliência com Resilience4j por gateway — CLOSED, OPEN e HALF_OPEN automático.</p>
          </a>
        </div>
      </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="content-wrapper">
      <div class="content">

        <!-- QUICKSTART -->
        <section id="quickstart" class="doc-section reveal">
          <div class="section-label">Inicio</div>
          <div class="section-header">
            <div>
              <div class="section-title">
                Primeiros passos em 3 minutos
                <a href="quickstart.html" class="permalink" onclick="copyPermalink(event,'quickstart')">#</a>
              </div>
              <div class="section-desc">Do zero ao primeiro pagamento aprovado. Siga os 3 passos abaixo — sem configuração de gateway real.</div>
            </div>
            <span class="reading-time">3 min</span>
          </div>

          <div class="callout callout-success">
            <span class="callout-icon"><svg viewBox="0 0 24 24" fill="none" stroke="#a78bfa" stroke-width="2.5"><path d="M20 6 9 17l-5-5"/></svg></span>
            <div class="callout-body"><strong>Pre-requisito:</strong> Docker instalado. Nenhuma credencial de Stripe/MercadoPago/PayPal necessária — usaremos o gateway <code>MOCK</code>.</div>
          </div>

          <p style="font-family:var(--font-mono);font-size:0.62rem;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-3);margin:1.5rem 0 0.6rem;">Passo 1 — Subir o servidor</p>
          <div class="codeblock">
            <div class="codeblock-header">
              <div class="lang-tabs">
                <button class="lang-tab active">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="13" height="13"><rect x="2" y="3" width="20" height="15" rx="2"/><path d="m7 13 3-3-3-3M13 13h4"/></svg>
                  Terminal
                </button>
              </div>
              <button class="copy-btn" onclick="copyBlock(this)">Copiar</button>
            </div>
            <div class="codeblock-body">
<div class="tab-pane active"><span class="t-method">git</span> clone https://github.com/vitinh0z/orquestraio.git
<span class="t-method">cd</span> orquestraio
<span class="t-method">docker-compose</span> up -d

<span class="t-comment"># API disponivel em: http://localhost:8080</span>
<span class="t-comment"># Swagger UI:       http://localhost:8080/swagger-ui/index.html</span>
<span class="t-comment"># API key de dev:   orquestraio-livre-123</span></div>
            </div>
          </div>

          <p style="font-family:var(--font-mono);font-size:0.62rem;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-3);margin:1.5rem 0 0.6rem;">Passo 2 — Fazer o primeiro pagamento</p>
          <div class="codeblock">
            <div class="codeblock-header">
              <div class="lang-tabs">
                <button class="lang-tab active" data-tab="qs-curl" data-lang="curl" onclick="switchTab(event)">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="13" height="13"><rect x="2" y="3" width="20" height="15" rx="2"/><path d="m7 13 3-3-3-3M13 13h4"/></svg>
                  cURL
                </button>
                <button class="lang-tab" data-tab="qs-js" data-lang="javascript" onclick="switchTab(event)">
                  <svg viewBox="0 0 24 24" width="13" height="13"><rect width="24" height="24" rx="2" fill="#f7df1e"/><text x="3" y="17" font-family="Arial" font-weight="bold" font-size="11" fill="#000">JS</text></svg>
                  JavaScript
                </button>
                <button class="lang-tab" data-tab="qs-py" data-lang="python" onclick="switchTab(event)">
                  <svg viewBox="0 0 24 24" width="13" height="13" fill="none"><path d="M11.914 2C6.945 2 7.236 4.17 7.236 4.17l.006 2.246h4.764v.674H5.394S2 6.744 2 11.759s3.008 4.84 3.008 4.84h1.795v-2.328s-.097-3.008 2.96-3.008h5.1s2.862.046 2.862-2.768V4.936S18.19 2 11.914 2z" fill="#3776ab"/><path d="M12.086 22c4.969 0 4.678-2.17 4.678-2.17l-.006-2.246h-4.764v-.674h6.612S22 17.256 22 12.241s-3.008-4.84-3.008-4.84h-1.795v2.328s.097 3.008-2.96 3.008h-5.1S6.275 12.69 6.275 15.504v3.56S5.81 22 12.086 22z" fill="#ffd43b"/></svg>
                  Python
                </button>
              </div>
              <div class="codeblock-actions">
                <button class="run-btn" onclick="runSandboxInternal('qs-sandbox-result','qs-sandbox-status','qs-sandbox-time','qs-sandbox-body',50.00)">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                  Run
                </button>
                <button class="copy-btn" onclick="copyBlock(this)">Copiar</button>
              </div>
            </div>
            <div class="codeblock-body">
<div class="tab-pane active" id="qs-curl"><span class="t-method">curl</span> <span class="t-flag">-X</span> POST http://localhost:8080<span class="t-url">/v1/payments</span> <span class="t-punct">\</span>
  <span class="t-flag">-H</span> <span class="t-str">"x-api-key: orquestraio-livre-123"</span> <span class="t-punct">\</span>
  <span class="t-flag">-H</span> <span class="t-str">"Content-Type: application/json"</span> <span class="t-punct">\</span>
  <span class="t-flag">-d</span> <span class="t-str">'{
    "idempotencyKey": "primeiro-pagamento-001",
    "amount": 50.00,
    "currency": "BRL",
    "paymentMethodRequest": { "type": "pix", "token": null },
    "customer": { "id": "u1", "email": "dev@mail.com", "document": "000.000.000-00" },
    "metadata": { "gateway": "MOCK" }
  }'</span></div>
<div class="tab-pane" id="qs-js"><span class="t-key">const</span> res = <span class="t-key">await</span> fetch(<span class="t-str">'http://localhost:8080/v1/payments'</span>, {
  method: <span class="t-str">'POST'</span>,
  headers: {
    <span class="t-str">'x-api-key'</span>: <span class="t-str">'orquestraio-livre-123'</span>,
    <span class="t-str">'Content-Type'</span>: <span class="t-str">'application/json'</span>
  },
  body: JSON.stringify({
    idempotencyKey: <span class="t-str">'primeiro-pagamento-001'</span>,
    amount: <span class="t-num">50.00</span>,
    currency: <span class="t-str">'BRL'</span>,
    paymentMethodRequest: { type: <span class="t-str">'pix'</span>, token: <span class="t-nil">null</span> },
    customer: { id: <span class="t-str">'u1'</span>, email: <span class="t-str">'dev@mail.com'</span>, document: <span class="t-str">'000.000.000-00'</span> },
    metadata: { gateway: <span class="t-str">'MOCK'</span> }
  })
});
<span class="t-key">const</span> data = <span class="t-key">await</span> res.json();
console.log(data.status); <span class="t-comment">// "APPROVED"</span></div>
<div class="tab-pane" id="qs-py">import requests, uuid

res = requests.post(
    <span class="t-str">"http://localhost:8080/v1/payments"</span>,
    headers={<span class="t-str">"x-api-key"</span>: <span class="t-str">"orquestraio-livre-123"</span>},
    json={
        <span class="t-str">"idempotencyKey"</span>: str(uuid.uuid4()),
        <span class="t-str">"amount"</span>: <span class="t-num">50.00</span>,
        <span class="t-str">"currency"</span>: <span class="t-str">"BRL"</span>,
        <span class="t-str">"paymentMethodRequest"</span>: {<span class="t-str">"type"</span>: <span class="t-str">"pix"</span>, <span class="t-str">"token"</span>: <span class="t-nil">None</span>},
        <span class="t-str">"customer"</span>: {<span class="t-str">"id"</span>: <span class="t-str">"u1"</span>, <span class="t-str">"email"</span>: <span class="t-str">"dev@mail.com"</span>},
        <span class="t-str">"metadata"</span>: {<span class="t-str">"gateway"</span>: <span class="t-str">"MOCK"</span>}
    }
)
print(res.json()[<span class="t-str">"status"</span>])  <span class="t-comment"># "APPROVED"</span></div>
            </div>
          </div>
          <div class="sandbox-result" id="qs-sandbox-result">
            <div class="sandbox-result-header">
              <span class="dot-live"></span>
              <span style="color:var(--brand);font-size:0.66rem;margin-left:0.4rem;">SANDBOX</span>
              <span id="qs-sandbox-status" style="margin-left:0.5rem;font-size:0.66rem;color:var(--text-3);"></span>
              <span id="qs-sandbox-time" style="margin-left:auto;font-size:0.66rem;color:var(--text-3);"></span>
            </div>
            <div class="sandbox-result-body" id="qs-sandbox-body">—</div>
          </div>

          <p style="font-family:var(--font-mono);font-size:0.62rem;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-3);margin:1.5rem 0 0.6rem;">Passo 3 — Interpretar a resposta</p>
          <div class="codeblock">
            <div class="codeblock-header">
              <div class="lang-tabs"><button class="lang-tab active">Resposta <span class="badge badge-green" style="font-size:0.55rem;margin-left:4px;">201</span></button></div>
              <button class="copy-btn" onclick="copyBlock(this)">Copiar</button>
            </div>
            <div class="codeblock-body">
<div class="tab-pane active"><span class="t-punct">{</span>
  <span class="t-key">"paymentId"</span><span class="t-punct">:</span>  <span class="t-str">"550e8400-e29b-41d4-a716-446655440000"</span><span class="t-punct">,</span>
  <span class="t-key">"status"</span><span class="t-punct">:</span>    <span class="t-str">"APPROVED"</span><span class="t-punct">,</span>
  <span class="t-key">"amount"</span><span class="t-punct">:</span>    <span class="t-num">50.00</span><span class="t-punct">,</span>
  <span class="t-key">"currency"</span><span class="t-punct">:</span>  <span class="t-str">"BRL"</span><span class="t-punct">,</span>
  <span class="t-key">"details"</span><span class="t-punct">:</span>   <span class="t-punct">{</span> <span class="t-key">"provider"</span><span class="t-punct">:</span> <span class="t-str">"MOCK"</span> <span class="t-punct">},</span>
  <span class="t-key">"createdAt"</span><span class="t-punct">:</span>  <span class="t-str">"2026-02-22T15:30:00Z"</span>
<span class="t-punct">}</span></div>
            </div>
          </div>
          <div class="callout callout-tip">
            <span class="callout-icon"><svg viewBox="0 0 24 24" fill="none" stroke="var(--blue)" stroke-width="2"><line x1="9" y1="18" x2="15" y2="18"/><line x1="10" y1="22" x2="14" y2="22"/><path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8 6 6 0 0 0 6 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 0 1 8.91 14"/></svg></span>
            <div class="callout-body"><strong>Proximo passo:</strong> Configure um webhook para receber notificações quando o status mudar. Ver seção <a href="webhooks.html">Webhooks</a>.</div>
          </div>
          <div class="last-updated">Atualizado em 22/02/2026 · v0.4.0</div>
          <div class="helpful-widget">
            <span class="helpful-label">Esta seção foi útil?</span>
            <div class="helpful-btns">
              <button class="helpful-btn yes" onclick="helpful(this,'yes')">Sim</button>
              <button class="helpful-btn no" onclick="helpful(this,'no')">Nao</button>
            </div>
            <span class="helpful-github"><a href="https://github.com/vitinh0z/orquestraio/issues/new">Abrir issue</a></span>
          </div>
        </section>

        <div class="doc-divider"></div>

        <section id="auth" class="doc-section reveal">
          <div class="section-label">Autenticacao</div>
          <div class="section-header">
            <div>
              <div class="section-title">
                API Key via header HTTP
                <a href="autenticacao.html" class="permalink" onclick="copyPermalink(event,'auth')">#</a>
              </div>
              <div class="section-desc">Todas as requisições precisam do header <code>x-api-key</code> com a chave do tenant. Chaves de produção têm o prefixo <code>Oz_</code>.</div>
            </div>
            <span class="reading-time">2 min</span>
          </div>
          <div class="callout callout-warning">
            <span class="callout-icon"><svg viewBox="0 0 24 24" fill="none" stroke="var(--amber)" stroke-width="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg></span>
            <div class="callout-body"><strong>Nunca exponha sua API key no frontend.</strong> Faça todas as chamadas pelo backend. Chaves comprometidas podem ser revogadas no painel sem downtime.</div>
          </div>
          <div class="last-updated">Atualizado em 22/02/2026 · v0.4.0</div>
        </section>

        <div class="doc-divider"></div>

        <footer class="doc-footer">
          <span>© 2026 Orquestraio — <a href="https://github.com/vitinh0z">@vitinh0z</a></span>
          <span>MIT License</span>
        </footer>

      </div>

      <!-- RIGHT TOC -->
      <div class="toc" id="toc">
        <div class="toc-label">Nesta pagina</div>
        <a href="quickstart.html" class="toc-item">Primeiros Passos</a>
        <a href="autenticacao.html" class="toc-item">Autenticacao</a>
        <a href="glossario.html" class="toc-item">Glossario</a>
        <a href="processar-pagamento.html" class="toc-item">Processar Pagamento</a>
        <a href="smartrouter.html" class="toc-item">SmartRouter</a>
        <a href="webhooks.html" class="toc-item">Webhooks</a>
        <a href="erros-status.html" class="toc-item">Erros</a>
        <a href="rate-limiting.html" class="toc-item">Rate Limiting</a>
        <a href="resiliencia.html" class="toc-item">Idempotencia</a>
        <a href="resiliencia.html" class="toc-item">Circuit Breaker</a>
        <a href="seguranca.html" class="toc-item">Seguranca</a>
        <a href="sandbox.html" class="toc-item">Sandbox</a>
        <a href="changelog.html" class="toc-item">Changelog</a>
      </div>
    </div>
  </main>
</div>

<div id="intro" style="position:absolute;top:0;"></div>

<script>
const CMD_ITEMS = [
  {label:'Primeiros Passos',    href:'#quickstart',   group:'Inicio',          sub:'docker-compose, MOCK'},
  {label:'Autenticacao',        href:'#auth',         group:'Inicio',          sub:'x-api-key, Oz_'},
  {label:'Glossario',           href:'glossario.html',group:'Inicio',          sub:'tenant, smartrouter'},
  {label:'Changelog',           href:'changelog.html',group:'Inicio',          sub:'v0.4.0, v0.3.2'},
  {label:'Processar Pagamento', href:'processar-pagamento.html',group:'API',   sub:'POST /v1/payments'},
  {label:'SmartRouter',         href:'smartrouter.html',         group:'API',  sub:'roteamento automatico'},
  {label:'Webhooks',            href:'webhooks.html',            group:'API',  sub:'notificacoes assincronas'},
  {label:'Erros & Status',      href:'erros-status.html',        group:'API',  sub:'400, 401, 409, 429'},
  {label:'Rate Limiting',       href:'rate-limiting.html',       group:'API',  sub:'Bucket4j, Redis'},
  {label:'Idempotencia',        href:'resiliencia.html',group:'Funcionalidades',sub:'Redis TTL 24h'},
  {label:'Circuit Breaker',     href:'resiliencia.html',group:'Funcionalidades',sub:'Resilience4j'},
  {label:'Seguranca',           href:'seguranca.html', group:'Funcionalidades',sub:'AES-256'},
  {label:'Sandbox & MOCK',      href:'sandbox.html',   group:'Guias',          sub:'gateway fake, testes'},
];

let fuse;
if(typeof Fuse!=='undefined') fuse=new Fuse(CMD_ITEMS,{keys:['label','sub','group'],threshold:0.4});
let focusedIdx=0,filteredItems=[...CMD_ITEMS];

function renderCmd(q){
  q=(q||'').trim();
  filteredItems=q?(fuse?fuse.search(q).map(r=>r.item):CMD_ITEMS.filter(i=>i.label.toLowerCase().includes(q.toLowerCase()))):CMD_ITEMS;
  focusedIdx=0;
  const groups={};
  filteredItems.forEach(item=>{if(!groups[item.group])groups[item.group]=[];groups[item.group].push(item);});
  let html='',gi=0;
  Object.entries(groups).forEach(([group,items])=>{
    html+=`<div class="cmd-section-label">${group}</div>`;
    items.forEach(item=>{
      const idx=gi++;
      html+=`<div class="cmd-item${idx===0?' focused':''}" data-idx="${idx}" onclick="gotoCmd('${item.href}')">
        <span class="cmd-item-label">${item.label}</span>
        <span class="cmd-item-sub">${item.sub}</span>
      </div>`;
    });
  });
  document.getElementById('cmdResults').innerHTML=html||'<div style="padding:1rem;text-align:center;color:var(--text-3);font-size:0.8rem;">Nenhum resultado</div>';
}
function openCmd(){document.getElementById('cmdOverlay').classList.add('open');const inp=document.getElementById('cmdInput');inp.value='';renderCmd('');setTimeout(()=>inp.focus(),50);}
function closeCmd(){document.getElementById('cmdOverlay').classList.remove('open');}
function closeCmdIfBg(e){if(e.target===document.getElementById('cmdOverlay'))closeCmd();}
function gotoCmd(href){closeCmd();if(href.startsWith('#')){const t=document.querySelector(href);if(t)t.scrollIntoView({behavior:'smooth',block:'start'});}else{location.href=href;}}
function filterCmd(val){renderCmd(val);}
function handleCmdKey(e){
  const items=document.querySelectorAll('.cmd-item');
  if(e.key==='ArrowDown'){e.preventDefault();focusedIdx=Math.min(focusedIdx+1,filteredItems.length-1);}
  else if(e.key==='ArrowUp'){e.preventDefault();focusedIdx=Math.max(focusedIdx-1,0);}
  else if(e.key==='Enter'){if(filteredItems[focusedIdx])gotoCmd(filteredItems[focusedIdx].href);return;}
  else if(e.key==='Escape'){closeCmd();return;}
  items.forEach((el,i)=>el.classList.toggle('focused',i===focusedIdx));
  if(items[focusedIdx])items[focusedIdx].scrollIntoView({block:'nearest'});
}
document.addEventListener('keydown',e=>{
  if((e.ctrlKey||e.metaKey)&&e.key==='k'){e.preventDefault();document.getElementById('cmdOverlay').classList.contains('open')?closeCmd():openCmd();}
  if(e.key==='Escape'&&document.getElementById('cmdOverlay').classList.contains('open'))closeCmd();
});

function initMermaid(){
  const theme=document.documentElement.getAttribute('data-theme')==='light'?'default':'dark';
  if(typeof mermaid==='undefined')return;
  mermaid.initialize({startOnLoad:false,theme,securityLevel:'loose'});
}

function toggleTheme(){
  const html=document.documentElement;
  const isLight=html.getAttribute('data-theme')==='light';
  const newTheme=isLight?'dark':'light';
  html.setAttribute('data-theme',newTheme);
  localStorage.setItem('theme',newTheme);
  document.getElementById('themeIcon').innerHTML=isLight
    ?'<circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>'
    :'<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>';
  initMermaid();
}
function applyTheme(){
  const saved=localStorage.getItem('theme');
  if(saved==='light'){
    document.documentElement.setAttribute('data-theme','light');
    document.getElementById('themeIcon').innerHTML='<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>';
  }
}

function toggleMobileDrawer(){
  document.getElementById('mobileDrawer').classList.toggle('open');
  document.getElementById('mobileDrawerOverlay').classList.toggle('open');
}

function toggleVersionDropdown(){document.getElementById('versionFloat').classList.toggle('open');}

function toggleDropdown(ddId,btnId){
  const isOpen=document.getElementById(ddId).classList.contains('open');
  closeDropdowns();
  if(!isOpen){document.getElementById(ddId).classList.add('open');if(btnId)document.getElementById(btnId).classList.add('open');}
}
function closeDropdowns(){
  document.querySelectorAll('.header-dropdown').forEach(d=>d.classList.remove('open'));
  document.querySelectorAll('.header-nav-btn').forEach(b=>b.classList.remove('open'));
}
document.addEventListener('click',e=>{
  if(!e.target.closest('.header-group'))closeDropdowns();
  if(!e.target.closest('.version-float'))document.getElementById('versionFloat').classList.remove('open');
});

function switchTab(e){
  const btn=e.target.closest('.lang-tab');
  const cb=btn.closest('.codeblock');
  const tabId=btn.dataset.tab;
  const lang=btn.dataset.lang;
  cb.querySelectorAll('.lang-tab').forEach(t=>t.classList.remove('active'));
  btn.classList.add('active');
  cb.querySelectorAll('.tab-pane').forEach(p=>p.classList.remove('active'));
  const pane=document.getElementById(tabId);if(pane)pane.classList.add('active');
  if(lang){
    localStorage.setItem('preferredLang',lang);
    document.querySelectorAll('.lang-tab[data-lang="'+lang+'"]').forEach(t=>{
      if(t===btn)return;
      const parentCb=t.closest('.codeblock');if(!parentCb)return;
      parentCb.querySelectorAll('.lang-tab').forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      parentCb.querySelectorAll('.tab-pane').forEach(p=>p.classList.remove('active'));
      const tp=document.getElementById(t.dataset.tab);if(tp)tp.classList.add('active');
    });
  }
}

function copyBlock(btn){
  const cb=btn.closest('.codeblock');
  const active=cb.querySelector('.tab-pane.active')||cb.querySelector('.tab-pane');
  navigator.clipboard.writeText(active?active.innerText:'').then(()=>{
    btn.textContent='Copiado';btn.classList.add('copied');
    setTimeout(()=>{btn.textContent='Copiar';btn.classList.remove('copied');},2000);
  });
}

function copyPermalink(e,id){
  e.preventDefault();
  const url=`${location.origin}${location.pathname}#${id}`;
  navigator.clipboard.writeText(url).then(()=>{
    const el=e.target;el.textContent='✓';setTimeout(()=>{el.textContent='#';},1500);
  });
}

const IS_LOCAL=location.hostname==='localhost'||location.hostname==='127.0.0.1';
async function runSandboxInternal(resultId,statusId,timeId,bodyId,amount){
  const rs=document.getElementById(resultId);
  rs.classList.add('visible');
  document.getElementById(statusId).textContent=IS_LOCAL?'conectando a localhost:8080...':'demo...';
  document.getElementById(bodyId).textContent='carregando...';
  const t0=performance.now();
  if(!IS_LOCAL){
    await new Promise(r=>setTimeout(r,320));
    const ms=Math.round(performance.now()-t0);
    const isErr=(amount===99.99);
    const mid='demo-'+Math.random().toString(36).slice(2,10);
    document.getElementById(statusId).textContent='201 Created';
    document.getElementById(timeId).textContent=ms+'ms';
    document.getElementById(bodyId).textContent=JSON.stringify(
      isErr?{paymentId:mid,status:'ERROR',amount,currency:'BRL',details:{provider:'MOCK',error:'Forced error via amount 99.99'},createdAt:new Date().toISOString()}
          :{paymentId:mid,status:'APPROVED',amount,currency:'BRL',details:{provider:'MOCK'},createdAt:new Date().toISOString()},
      null,2
    );return;
  }
  try{
    const key='sandbox-'+Date.now();
    const res=await fetch('http://localhost:8080/v1/payments',{method:'POST',headers:{'x-api-key':'orquestraio-livre-123','Content-Type':'application/json'},body:JSON.stringify({idempotencyKey:key,amount:amount||197,currency:'BRL',paymentMethodRequest:{type:'pix',token:null},customer:{id:'usr_sandbox',email:'dev@orquestraio.com',document:'000.000.000-00'},metadata:{gateway:'MOCK'}})});
    const ms=Math.round(performance.now()-t0);
    const data=await res.json();
    document.getElementById(statusId).textContent=res.status+' '+res.statusText;
    document.getElementById(timeId).textContent=ms+'ms';
    document.getElementById(bodyId).textContent=JSON.stringify(data,null,2);
  }catch(err){
    const ms=Math.round(performance.now()-t0);
    document.getElementById(statusId).textContent='Erro de conexao';
    document.getElementById(timeId).textContent=ms+'ms';
    document.getElementById(bodyId).textContent='// Nao foi possivel conectar em localhost:8080\n// docker-compose up -d\n\nErro: '+err.message;
  }
}

function helpful(btn,type){
  const widget=btn.closest('.helpful-widget');
  widget.querySelectorAll('.helpful-btn').forEach(b=>b.classList.add('voted'));
  btn.textContent=type==='yes'?'Obrigado!':'Obrigado pelo feedback';
  btn.style.color=type==='yes'?'var(--brand)':'var(--red)';
}

const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) entry.target.classList.add('visible');
  });
}, {threshold: 0.1});
document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

applyTheme();
initMermaid();
renderCmd('');
</script>

</body>
</html>
